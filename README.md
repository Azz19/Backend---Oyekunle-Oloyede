# Backend---Oyekunle-Oloyede

The One Line a Day project backend.

One Line a Day platform provides an insightful snapshot of your thoughts, memories, change, and progress on each of the 365 days of the year. Gives users a single location to record and retrieve their thoughts.

Users can log in and start making entries in their 10 year journal. They can create, review, update, and delete data. The app functions as a journal and you can see all entries each day across 10 years at the same time.

## API DOCUMENTATION

The One Line a Day is hosted on Heroku and can be [here](https://one-line-daily.herokuapp.com/)

### API Endpoints

The following endpoints are available for use.

| Methods | Endpoint            | Description          |
| ------- | ------------------- | -------------------- |
| GET     | /api/auth/users     | gets all users       |
| GET     | /api/auth/users/:id | gets a user by id    |
| POST    | /api/auth/register  | registers a new user |
| POST    | /api/auth/login     | logs a user in       |
| GET     | /api/entries        | gets all entries     |
| GET     | /api/entries/:id    | gets a user by id    |
| POST    | /api/entries        | creates an entry     |
| PUT     | /api/entries/:id    | updates an entry     |
| DELETE  | /api/entries/:id    | deletes an entry     |

#### User Schema

|  Fields   |    Data type     |                      Metadata                       |
| :-------: | :--------------: | :-------------------------------------------------: |
|    id     | unsigned integer | primary key, auto-increments, generated by database |
| firstname |      string      |                      required                       |
| lastname  |      string      |                      required                       |
| username  |      string      |                  required, unique                   |
|   email   |      string      |                  required, unique                   |
| password  |      string      |                  required, unique                   |

#### Entry Schema

|   Fields   |    Data type     |                      Metadata                       |
| :--------: | :--------------: | :-------------------------------------------------: |
|     id     | unsigned integer | primary key, auto-increments, generated by database |
|   title    |      string      |        required, maximum of 250 characters.         |
|    text    |       text       |                      required                       |
| created_at |    timestamp     |                generated by database                |
|  user_id   | unsigned integer |     required, foreign key, references users(id)     |

#### Authentication Endpoints

### Registration [POST]

**URL**: _https://one-line-daily.herokuapp.com/api/auth/register_
**Payload**:

```javascript
{
    "firstname": "wale",
    "lastname": "Doe",
    "username": "janeDoe2",
    "email": "janeDoe2@doe.com",
    "password": "12345"
}
```

**Returns**: A message that user has been added successfully.

```javascript
{
    "status": 201,
    "message": "User created successfully"
}
```

### Login [POST]

**URL**: _https://one-line-daily.herokuapp.com/api/auth/login_
**Payload**:

```javascript
{
    "email": "janeDoe2@doe.com",
    "password": "12345"
}
```

**Returns**: An object with the token

```javascript
{
    "status": 200,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6OCwiaWF0IjoxNTY0NDIydfdferleHAiOjE1NjQ0MjYyODV9.QkVwzXvzZpDw2BXTVyzEid-yba5RoiYUQoqXloaMZ-8",
    "user": {
        "id": 8,
        "firstname": "wale",
        "lastname": "Doe",
        "email": "me@me.com"
    }
}
```

### Get all users [GET]

**URL**: _https://one-line-daily.herokuapp.com/api/auth/users_

**Returns**: An array of user object.

```javascript
{
    "status": 200,
    "data": [
        {
            "id": 1,
            "firstname": "John",
            "lastname": "Doe",
            "email": "jh@john.com"
        },
        {
            "id": 2,
            "firstname": "Jane",
            "lastname": "Doe",
            "email": "jn@john.com"
        },
        {
            "id": 3,
            "firstname": "Will",
            "lastname": "Smith",
            "email": "fresh@prince.com"
        },
        {
            "id": 4,
            "firstname": "Vin",
            "lastname": "Diesel",
            "email": "vin@diesel.com"
        },
        {
            "id": 5,
            "firstname": "Van",
            "lastname": "Damme",
            "email": "van@damme.com"
        },
        {
            "id": 6,
            "firstname": "wale",
            "lastname": "Doe",
            "email": "wale@doe.com"
        },
        {
            "id": 7,
            "firstname": "wale",
            "lastname": "Doe",
            "email": "wale@doe.coms"
        },
        {
            "id": 8,
            "firstname": "wale",
            "lastname": "Doe",
            "email": "me@me.com"
        }
    ]
}
```

### Get user by id [GET]

**URL**: _https://one-line-daily.herokuapp.com/api/auth/users/1_

**Returns**: the user object.

```javascript
{
    "status": 200,
    "data": {
        "id": 5,
        "firstname": "Van",
        "lastname": "Damme",
        "email": "van@damme.com"
    }
}
```

## Author

_Oyekunle Oloyede_
